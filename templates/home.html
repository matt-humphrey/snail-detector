{% extends "base.html" %}

{% block title %}Big Black Snails Compilation{% endblock %}
{% block content %}
  <h2 class="pt-3">Select a model</h2>
  <hr>
<!--  <form method="post" action="" enctype="multipart/form-data">-->
    <div class="row pb-3">
      <div class="col-md-2">
        <label>Upload Image(s)</label>
      </div>
<!--      <input name="file_list" type="file" multiple>-->
      <div class="col-md-2">
        <button id="upload_widget" class="btn btn-secondary">Choose Files</button>
      </div>
    </div>
  <form method="POST" action="" enctype="multipart/form-data">
    <div class="form-row">
      <div class="form-group col-md-2">
        <label>Select YOLO Model</label>
      </div>
      <div class="form-group col-md-2">
        <select class="form-control form-control-sm" name="model_name">
        {% for selection in model_selection_options %}
          <option>{{ selection }}</option>
        {% endfor %}
        </select>
      </div>
    </div>
    <div class="form-row">
      <div class="form-group col-md-2">
        <label>Model Inference Size</label>
      </div>
      <div class="form-group col-md-2">
        <input type="text" class="form-control" name="img_size" value="640">
      </div>
    </div>
    <button class="btn btn-primary" type="submit">Submit</button>
  </form>

  <script src="https://widget.cloudinary.com/v2.0/global/all.js" type="text/javascript"></script>
  <script type="text/javascript">
  var myWidget = cloudinary.createUploadWidget({
    cloudName: 'mhumphrey',
    uploadPreset: 'mh_snails'}, (error, result) => {
      if (!error && result && result.event === "success") {
        console.log('Done! Here is the image info: ', result.info);
      }
    }
  )
  document.getElementById("upload_widget").addEventListener("click", function(){
      myWidget.open();
    }, false);
  </script>
{% endblock %}